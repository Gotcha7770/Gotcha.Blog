---
title: "–ì—Ä–æ–∫–∞–µ–º –∞–ø–ø–ª–∏–∫–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ç–æ—Ä—ã"
icon: üïµÔ∏è‚Äç‚ôÇÔ∏è
date: 2022-12-15 10:06:00 +0300
tags: [–ø–µ—Ä–µ–≤–æ–¥, dev, F#]
---

`–ê–ø–ø–ª–∏–∫–∞—Ç–∏–≤–Ω—ã–π —Ñ—É–Ω–∫—Ç–æ—Ä`, –≤–æ–∑–º–æ–∂–Ω–æ, –Ω–∞–∏–º–µ–Ω–µ–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–π –±—Ä–∞—Ç –º–æ–Ω–∞–¥—ã, –Ω–æ –æ–Ω —Å—Ç–æ–ª—å –∂–µ –≤–∞–∂–µ–Ω –∏ —Ä–µ—à–∞–µ—Ç –ø–æ—Ö–æ–∂—É—é –ø—Ä–æ–±–ª–µ–º—É. –í —ç—Ç–æ–º –ø–æ—Å—Ç–µ –º—ã –ø–æ—Å—Ç–∞—Ä–∞–µ–º—Å—è —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è, —á—Ç–æ –æ–Ω –∏–∑ —Å–µ–±—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç.

## –ö—Ä–∞—Ç–∫–æ–µ –≤–≤–µ–¥–µ–Ω–∏–µ –≤ F#

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∫ —Ç–æ–º—É, —á—Ç–æ –º—ã —É–∑–Ω–∞–ª–∏ –≤ –ø—Ä–æ—à–ª—ã—Ö —á–∞—Å—Ç—è—Ö, –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–µ–µ:

- –í F# –æ–ø—Ä–µ–¥–µ–ª–µ–Ω —Ç–∏–ø `Result<T, E>`. –û–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∑–∞–∫–æ–Ω—á–∏—Ç—å—Å—è –æ—à–∏–±–∫–æ–π. –£ –Ω–µ–≥–æ –µ—Å—Ç—å 2 –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞, `OK` - –∑–∞–¥–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∏–ø–∞ `T`, –∏ `Error` - —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∏–ø–∞ `E` –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏.
- –ü–∞—Ç—Ç–µ—Ä–Ω-–º–∞—Ç—á–∏–Ω–≥ –¥–ª—è —Ç–∏–ø–∞ `Result` –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

```F#
match aResult with
| Ok x -> // –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –≤–µ—Ä–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è x
| Error e -> // –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –∑–Ω–∞–µ—á–Ω–∏—è e, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–µ–≥–æ –æ—à–∏–±–∫—É
```

## –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –Ω–∞—Å –ø–æ–ø—Ä–æ—Å–∏–ª–∏ –Ω–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫—Ä–µ–¥–∏—Ç–Ω–æ–π –∫–∞—Ä—Ç—ã. –ú–æ–¥–µ–ª—å –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```F#
type CreditCard =
    { Number: string
      Expiry: string
      Cvv: string }
```

–ê —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –Ω–∞–º –Ω–∞–¥–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å, —Ç–∞–∫:

```F#
let validateCreditCard (creditCard: CreditCard): Result<CreditCard, string>
```

–ö —Å—á–∞—Å—Ç—å—é, –∫—Ç–æ-—Ç–æ —É–∂–µ –Ω–∞–ø–∏—Å–∞–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç—ã, —Å—Ä–æ–∫–∞ –µ–µ –¥–µ–π—Å—Ç–≤–∏—è –∏ –∫–æ–¥–∞ CVV:

```F#
let validateNumber number: Result<string, string> =
    if String.length number > 16 then
        Error "A credit card number must be less than 16 characters"
    else
        Ok number

let validateExpiry expiry: Result<string, string> =
    // –∫–∞–∫–∞—è-—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è

let validateCvv cvv: Result<string, string> =
   // –∫–∞–∫–∞—è-—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ CVV
```

–°–µ–π—á–∞—Å –Ω–∞—Å –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞–ª–∏–¥–Ω–∞ –ª–∏ –∫–∞—Ä—Ç–∞. –Ø –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–≤–µ–ª —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç—ã, –Ω–æ, –≤ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –æ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –∫—É–¥–∞ —Å–ª–æ–∂–Ω–µ–µ. –ì–ª–∞–≤–Ω–æ–µ, –Ω–∞ —á—Ç–æ —Å–ª–µ–¥—É–µ—Ç –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ - –∫–∞–∂–¥–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É, –∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–∏–ø `Result<string, string>`, –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∑—ã–≤–∞–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ø—É—Å—Ç–∏–º—ã–º. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ, —Ñ—É–Ω–∫—Ü–∏—è –≤–µ—Ä–Ω–µ—Ç —Å—Ç—Ä–æ–∫—É —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ.

## –ù–∞—à–∞ –ø–µ—Ä–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

–ù–∞–º –ø–æ–≤–µ–∑–ª–æ! –í—Å–µ, —á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å - –∫–∞–∫–∏–º-—Ç–æ –æ–±—Ä–∞–∑–æ–º —Å–∫–æ–º–ø–æ–Ω–æ–≤–∞—Ç—å —ç—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫—Ä–µ–¥–∏—Ç–Ω–æ–π –∫–∞—Ä—Ç—ã. –î–∞–≤–∞–π—Ç–µ –ø–æ–ø—Ä–æ–±—É–µ–º!

```F#
let validateCreditCard card =
    let validatedNumber = validateNumber card.Number
    let validatedExpiry = validateExpiry card.Expiry
    let validatedCvv = validateCvv card.Cvv

    { Number = validatedNumber
      Expiry = validatedExpiry
      Cvv = validatedCvv }
```

–•–º–º–º, —ç—Ç–æ—Ç –∫–æ–¥ –Ω–µ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è. –ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –º—ã –ø—ã—Ç–∞–µ–º—Å—è –∑–∞–ø–∏—Å–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è —Ç–∏–ø–∞ `Result<string, string>` –≤ –ø–æ–ª—è –æ–±—ä–µ–∫—Ç–∞ `CreditCard`, –Ω–æ –≤—Å–µ –µ–≥–æ –ø–æ–ª—è –∏–º–µ—é—Ç —Ç–∏–ø `string`.

## –ö–∞–∂–µ—Ç—Å—è, —è –≤–∏–∂—É —á—Ç–æ-—Ç–æ –Ω–∞ –±—É–∫–≤—É M

–ë—É–¥—É—á–∏ –∑–Ω–∞–∫–æ–º—ã–º–∏ —Å [–ú–æ–Ω–∞–¥–æ–π][1], –º—ã –º–æ–∂–µ–º –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å –µ–µ –ø–æ–º–æ—â—å—é. –ö–∞–∂–¥–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `string` –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –µ–µ –≤ `Result<string, string>`, –∏ –º—ã, –ø–æ-–≤–∏–¥–∏–º–æ–º—É, —Ö–æ—Ç–∏–º –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∞–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –≤ —Ü–µ–ø–æ—á–∫—É. –ú—ã –∑–Ω–∞–µ–º, —á—Ç–æ –¥–ª—è —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `bind` (–ø–æ-–¥—Ä—É–≥–æ–º—É `flatMap`). –ù–∞–ø—Ä–∏–º–µ—Ä, `bind` –¥–ª—è –º–æ–Ω–∞–¥—ã `Result` –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```F#
let bind f result =
    match result with
    | Ok x -> f x
    | Error e -> Error e
```

–ü–µ—Ä–µ–ø–∏—à–µ–º —Ñ—É–Ω–∫—Ü–∏—é `validateCreditCard` –∏—Å–ø–æ–ª—å–∑—É—è `bind`

```F#
let validateCreditCard card =
    validateNumber card.Number
    |> bind (validateExpiry card.Expiry)
    |> bind (validateCvv card.Cvv)
    |> fun number expiry cvv ->
        { Number = number
          Expiry = expiry
          Cvv = cvv }
```

–í—ã–≥–ª—è–¥–∏—Ç –∞–∫–∫—É—Ä–∞—Ç–Ω–æ, –Ω–æ –≤—Å–µ —Ä–∞–≤–Ω–æ –Ω–µ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è!

–í—ã–∑–æ–≤ `bind` –æ–∂–∏–¥–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —à–∞–≥–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π. –í –ø–µ—Ä–≤–æ–º —Å–ª—É—á–∞–µ —ç—Ç–æ –±—É–¥–µ—Ç –≤–∞–ª–∏–¥–Ω—ã–π –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –Ω–∞ –≤—Ö–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏ `validateExpiry`. –û–¥–Ω–∞–∫–æ —Ñ—É–Ω–∫—Ü–∏—è `validateExpiry` –∂–∏–¥–∞–µ—Ç –Ω–µ –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã, –∫–æ—Ç–æ—Ä—ã–π –º—ã —É–∂–µ –ø—Ä–æ–≤–µ—Ä–∏–ª–∏ –∏ –æ–±–µ—Ä–Ω—É–ª–∏ –≤ `Result`, –æ–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è. –ò –ø—Ä–∏ —ç—Ç–æ–º –Ω–∞–º –µ—â–µ –Ω–∞–¥–æ –∫–∞–∫-—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–æ–º–µ—Ä –¥–æ –∫–æ–Ω—Ü–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π, —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ —Å–æ–∑–¥–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä `CreditCard`.

–ú—ã –º–æ–∂–µ–º –¥–æ–±–∏—Ç—å—Å—è —ç—Ç–æ–≥–æ, –Ω–∞–∫–∞–ø–ª–∏–≤–∞—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ –º–µ—Ä–µ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è.

```F#
let validateCreditCard card =
    validateNumber card.Number
    |> bind
        (fun number ->
            validateExpiry card.Expiry
            |> Result.map (fun expiry -> number, expiry))
    |> bind
        (fun (number, expiry) ->
            validateCvv card.Cvv
            |> Result.map
                (fun cvv ->
                    { Number = number
                      Expiry = expiry
                      Cvv = cvv }))
```

–û–π! –≠—Ç–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ –±–æ–ª–µ–µ –∑–∞–ø—É—Ç–∞–Ω–Ω—ã–π –∫–æ–¥, —á–µ–º –Ω–∞–º —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã. –ù–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ –Ω–∞–º –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ø–∏—Å–∞—Ç—å –ª—è–º–±–¥–∞-–≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–µ—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —à–∞–≥–∞, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –µ—â–µ –æ–¥–∏–Ω —Ñ—Ä–∞–≥–º–µ–Ω—Ç –¥–∞–Ω–Ω—ã—Ö –∏ —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç –≤—Å–µ –≤ –∫–æ—Ä—Ç–µ–∂, –ø–æ–∫–∞ –º—ã, –Ω–∞–∫–æ–Ω–µ—Ü, –Ω–µ –ø–æ–ª—É—á–∏–º –≤—Å–µ —á–∞—Å—Ç–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è `CreditCard`.

–ù–∞—à–∞ –∏ –±–µ–∑ —Ç–æ–≥–æ —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —É—Ç–æ–Ω—É–ª–∞ –≤ –º–æ—Ä–µ –ª—è–º–±–¥–∞-–≤—ã—Ä–∞–∂–µ–Ω–∏–π –∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –∫–æ—Ä—Ç–µ–∂–µ–π. –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Ç–æ—Ç –±–µ—Å–ø–æ—Ä—è–¥–æ–∫, —á—Ç–æ –º—ã –ø–æ–ª—É—á–∏–ª–∏ –±—ã, –±—É–¥—å —É `CreditCard` –±–æ–ª—å—à–µ –ø–æ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–µ–±—É—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏. –ù—É–∂–Ω–æ —Ä–µ—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –∏–∑–±–∞–≤–∏—Ç –Ω–∞—Å –æ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤–æ –≤—Å–µ–º —ç—Ç–æ–º —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω–æ–º –∫–æ–¥–µ.

## –ê–ø–ø–ª–∏–∫–∞—Ç–∏–≤–Ω—ã–π —Ñ—É–Ω–∫—Ç–æ—Ä —Å–ø–µ—à–∏—Ç –Ω–∞ –ø–æ–º–æ—â—å

–î—Ä—É–≥–æ–π —Å–ø–æ—Å–æ–± –∞–∫–∫—É–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è ‚Äî —á–∞—Å—Ç–∏—á–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ. –ú—ã –º–æ–∂–µ–º –≤–∑—è—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç `n` –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ –≤–µ—Ä–Ω—É—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç `n - 1` –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤. –î–ª—è –ø—Ä–∏–º–µ—Ä–∞ –Ω–∞–ø–∏—à–µ–º —Ñ—É–Ω–∫—Ü–∏—é `createCreditCard`, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–æ—Å—Ç—ã–º–∏ —Å—Ç—Ä–æ–∫–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏:

```F#
let createCreditCard number expiry cvv =
    { Number = number
      Expiry = expiry
      Cvv = cvv }
```

–ú—ã –º–æ–∂–µ–º –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –∞–∫–∫—É–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è, –ø—Ä–∏–º–µ–Ω—è—è –∏—Ö –∫ —Ñ—É–Ω–∫—Ü–∏–∏.

```F#
let number = "1234"
let numberApplied = createCreditCard number
```

`numberApplied` —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è —Å —Å–∏–≥–Ω–∞—Ç—É—Ä–æ–π

```F#
string -> string -> CreditCard
```

–∏–ª–∏, –µ—Å–ª–∏ –ø—Ä–æ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

```F#
expiry -> cvv -> CreditCard
```

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º—ã –º–æ–∂–µ–º —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã –Ω–∞ –±—É–¥—É—â–µ–µ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ—Ä—Ç–µ–∂.

–î–∞–≤–∞–π—Ç–µ –∏–∑–æ–±—Ä–µ—Ç–µ–º —Ñ—É–Ω–∫—Ü–∏—é `apply`, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–∞—Å—Ç–∏—á–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π, –∑–∞–∫–ª—é—á–µ–Ω–Ω—ã—Ö –≤ –Ω–µ–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —Ç–∞–∫—É—é –∫–∞–∫ `Result`, –∏ –ø–æ–º–µ—Å—Ç–∏–º –µ–µ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º

```F#
let validateCreditCard card: Result<CreditCard, string> =
    Ok (createCreditCard)
    |> apply (validateNumber card.Number)
    |> apply (validateExpiry card.Expiry)
    |> apply (validateCvv card.Cvv)
```

–í–∞–º –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –∑–∞—á–µ–º –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å `createCreditCard` –≤ `Ok`. –§—É–Ω–∫—Ü–∏—è `validateCreditCard` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–∏–ø `Result<CreditCard, string>`, –∑–Ω–∞—á–∏—Ç –º–µ—Ç–æ–¥ `apply` –¥–æ–ª–∂–µ–Ω —Ç–∞–∫ –∂–µ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–¥ —Ç–∏–ø–æ–º `Result`. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –ø–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤ `apply` —Ç–æ–∂–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ç–∏–ø `Result`, —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏–ª–∞—Å—å –≤—Å—è —Ü–µ–ø–æ—á–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.

–ï—â–µ –æ–¥–Ω–∞ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è –¥–µ—Ç–∞–ª—å - `Result` —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Ñ—É–Ω–∫—Ü–∏—é, –∞ –Ω–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –ò–º–µ–Ω–Ω–æ –≤ —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–∏ –ø–æ–º–æ—â–∏ —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º—ã –±—É–¥–µ–º –¥–æ–±–∞–≤–ª—è—Ç—å –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–∑–æ–≤–æ–≤ `apply`, –≤—ã–ø–æ–ª–Ω—è—è –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–æ–≤–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞.

–ö–∞–∫ –≤—Å–µ–≥–¥–∞ –ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥–µ–º –æ—Ç—Ç–∞–ª–∫–∏–≤–∞—Ç—å—Å—è –æ—Ç —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –∏ –ø–æ–∑–≤–æ–ª–∏–º —Ç–∏–ø–∞–º –≤–µ—Å—Ç–∏ –Ω–∞—Å. –ü—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ `apply` –Ω–∞–º –Ω—É–∂–Ω–æ 2 –∞—Ä–≥—É–º–µ–Ω—Ç–∞: `Result<(T -> V), E>` –∏ `Result<T, E>`. –ú—ã –ø–æ–ø—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —Ç–∏–ø–∞ `T -> V` –∏ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∏–ø–∞ `T` –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∫ —Ñ—É–Ω–∫—Ü–∏–∏, –µ—Å–ª–∏ –æ–±–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç `Ok`. –ú–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è, —á—Ç–æ —Ç–∏–ø `T -> V` —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç –æ–¥–Ω–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞, –æ–¥–Ω–∞–∫–æ, –Ω–∏–∫—Ç–æ –Ω–µ –º–µ—à–∞–µ—Ç –Ω–∞–º —Ç—Ä–∞–∫—Ç–æ–≤–∞—Ç—å —Å–∞–º —Ç–∏–ø `V` –∫–∞–∫ –µ—â–µ –æ–¥–Ω—É —Ñ—É–Ω–∫—Ü–∏—é. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º—ã –º–æ–∂–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ñ—É–Ω–∫—Ü–∏–µ–π –æ—Ç –ª—é–±–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ –ø–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–∏–ø—É —Å–æ–¥–µ—Ä–∂–∞—â–µ–º—É—Å—è –≤ `Result`, –∫–æ—Ç–æ—Ä—ã–π –º—ã –ø—ã—Ç–∞–µ–º—Å—è –ø—Ä–∏–º–µ–Ω–∏—Ç—å.

–ó–Ω–∞—á–∏—Ç —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ –º–µ—Ç–æ–¥–∞ `apply` –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

```F#
Result<T, E> -> Result<(T -> V), E> -> Result<V, E>
```

–ò –¥–∞–∂–µ —Å—Ç–æ–ª—å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, —á—Ç–æ–±—ã –µ–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å

```F#
let apply a f =
    match f, a with
    | Ok g, Ok x -> g x |> Ok
    | Error e, Ok _ -> e |> Error
    | Ok _, Error e -> e |> Error
    | Error e, Error _ -> e |> Error
```

–í –∏—Ç–æ–≥–µ –º—ã –ø—Ä–æ—Å—Ç–æ —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ–º —Å –æ–±—Ä–∞–∑—Ü–æ–º –∏ —Ñ—É–Ω–∫—Ü–∏—é –∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ 4 –≤–æ–∑–º–æ–∂–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞. –ï—Å–ª–∏ –æ–±–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç `Ok`, –º—ã –ø—Ä–∏–º–µ–Ω—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é –∫ –∑–Ω–∞—á–µ–Ω–∏—é, –∫–∞–∫ –∏ —Ö–æ—Ç–µ–ª–∏, –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø—è—Ç—å –ø–æ–º–µ—â–∞–µ–º –≤ `Ok`. –í–æ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö —É –Ω–∞—Å –µ—Å—Ç—å –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ –æ–¥–Ω–∞ –æ—à–∏–±–∫–∞, –ø–æ—ç—Ç–æ–º—É –º—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ–µ. –ü–æ—Å–ª–µ–¥–Ω–∏–π —Å–ª—É—á–∞–π –∏–Ω—Ç–µ—Ä–µ—Å–µ–Ω —Ç–µ–º, —á—Ç–æ –º—ã –ø–æ–ª—É—á–∞–µ–º 2 –æ—à–∏–±–∫–∏. –í —ç—Ç–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º—ã –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–µ—Ä–≤—É—é.

## –¢–µ—Å—Ç—ã

–ù–∞–ø–∏—à–µ–º —Ç–µ—Å—Ç—ã –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Å–µ–∞–Ω—Å–µ F#, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—Å—è, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è `apply` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –∏, –∑–∞–æ–¥–Ω–æ, –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å, —á—Ç–æ –∂–µ —Ç—É—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.

```F#
> Ok (createCreditCard)
     |> apply ((Ok "1234"): Result<string, string>)
     |> apply (Ok "08/19")
     |> apply (Ok "123")

val it : Result<CreditCard, string> = Ok { Number = "1234"
                                           Expiry = "08/19"
                                           Cvv = "123" }
```

–í—ã–≥–ª—è–¥–∏—Ç –Ω–µ–ø–ª–æ—Ö–æ. –ï—Å–ª–∏ –≤—Å–µ –≤—Ö–æ–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–∞–ª–∏–¥–Ω—ã, –º—ã –ø–æ–ª—É—á–∞–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ–±—ä–µ–∫—Ç `CreditCard`. –ü–æ—Å–º–æ—Ç—Ä–∏–º —á—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç, –µ—Å–ª–∏ –æ–¥–∏–Ω –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –±—É–¥–µ—Ç –Ω–µ–≤–µ—Ä–Ω—ã–º.

```F#
> Ok (createCreditCard)
     |> apply ((Ok "1234"): Result<string, string>)
     |> apply (Ok "08/19")
     |> apply (Error "Invalid CVV")

val it : Result<CreditCard, string> = Error "Invalid CVV"
```

–ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ! –ö–∞–∫ –º—ã –∏ –æ–∂–∏–¥–∞–ª–∏. –ü–æ—Å–ª–µ–¥–Ω–µ–µ, —á—Ç–æ –µ—Å–ª–∏ –Ω–∞ –≤—Ö–æ–¥ –ø–æ–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–≤–µ—Ä–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.

```F#
> Ok (createCreditCard)
     |> apply ((Error "Invalid card number"): Result<string, string>)
     |> apply (Ok "08/19")
     |> apply (Error "Invalid CVV")

val it : Result<CreditCard, string> = Error "Invalid card number"
```

–ú—ã —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ. –§—É–Ω–∫—Ü–∏—è –≤—ã–¥–∞–µ—Ç –æ—à–∏–±–∫—É —É–∂–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –∑–Ω–∞—á–µ–Ω–∏–∏. –í—ã –º–æ–∂–µ—Ç–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ —É—Å–æ–º–Ω–∏—Ç—å—Å—è, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —ç—Ç–æ? –ú–æ–∂–µ—Ç –ª—É—á—à–µ –±—ã–ª–æ –±—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å—Ä–∞–∑—É –≤—Å–µ –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏? –í —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Å—Ç–µ –º—ã —É–≤–∏–¥–∏–º, –∫–∞–∫ –º–æ–∂–Ω–æ —ç—Ç–æ–≥–æ –¥–æ–±–∏—Ç—å—Å—è.

(_–ø–æ —Ç—Ä–∞–¥–∏—Ü–∏–∏ –æ—Ç –º–µ–Ω—è –≤–∞—Ä–∏–∞–Ω—Ç —Å —Ç–µ—Å—Ç–∞–º–∏:_

```F#
let values: obj[] list =
    [ [| Ok "1234"
         Ok "08/19"
         Ok "123"
         Ok
             { Number = "1234"
               Expiry = "08/19"
               Cvv = "123" } |]
      [| Ok "1234"
         Ok "08/19"
         Result<string, obj>.Error "Invalid CVV"
         Result<CreditCard, obj>.Error "Invalid CVV" |]
      [| Result<string, obj>.Error "Invalid card number"
         Ok "08/19"
         Result<string, obj>.Error "Invalid CVV"
         Result<CreditCard, obj>.Error "Invalid card number" |] ]

[<Theory>]
[<MemberData(nameof(values))>]
let test_applicative number expiry cvv expected =
    test <@ validateCreditCard number expiry cvv = expected @>
```

_–ø—Ä–∏–º. –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–∞_)

## –ú—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ –∏–∑–æ–±—Ä–µ–ª–∏ –∞–ø–ø–ª–∏–∫–∞—Ç–∏–≤–Ω—ã–π —Ñ—É–Ω–∫—Ç–æ—Ä

–§—É–Ω–∫—Ü–∏—è `apply` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –Ω–∞ –æ–±—ä–µ–∫—Ç–µ, —ç—Ç–æ —Ç–æ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –∞–ø–ø–ª–∏–∫–∞—Ç–∏–≤–Ω—ã–º —Ñ—É–Ω–∫—Ç–æ—Ä–æ–º. –ù–∞–¥–µ—é—Å—å, –Ω–∞–≥–ª—è–¥–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã –ø–æ–º–æ–≥–ª–∞ –≤–∞–º –ø–æ–Ω—è—Ç—å –µ–≥–æ —Å—É—Ç—å –ª—É—á—à–µ, –Ω–µ–∂–µ–ª–∏ –ø—Ä–æ—Å—Ç–æ–µ —Å–æ–∑–µ—Ä—Ü–∞–Ω–∏–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ —á—Ç–µ–Ω–∏–µ –æ –∑–∞–∫–æ–Ω–∞—Ö –∞–ø–ø–ª–∏–∫–∞—Ç–∏–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ç–æ—Ä–æ–≤.

–ê–ø–ø–ª–∏–∫–∞—Ç–∏–≤–Ω—ã–π —Ñ—É–Ω–∫—Ç–æ—Ä –ø–æ—Ö–æ–∂ –Ω–∞ –º–æ–Ω–∞–¥—É —Ç–µ–º, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏. –ù–æ –æ–Ω –ø–æ–ª–µ–∑–µ–Ω –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —ç—Ç–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã (_–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ, –Ω–∞ –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ `createCreditCard` –≤ –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ –Ω–µ –≤–ª–∏—è–µ—Ç, –∫–∞–∫–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç –º—ã –ø—Ä–æ–≤–µ—Ä–∏–º –ø–µ—Ä–≤—ã–º, –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã –∏–ª–∏ CVV –∫–æ–¥. –ø—Ä–∏–º. –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–∞_), —Ç–æ–≥–¥–∞ –∫–∞–∫ –º–æ–Ω–∞–¥–∞ –±–µ—Ä–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç –¥–ª—è –¥—Ä—É–≥–æ–π.

## –ù–µ–º–Ω–æ–≥–æ –ø—Ä–∏—á–µ—à–µ–º –Ω–∞—à –∫–æ–¥

–ù–∞–º –ø—Ä–∏—à–ª–æ—Å—å –æ–±–µ—Ä–Ω—É—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `createCreditCard` –≤ `Ok` –≤ –Ω–∞—á–∞–ª–µ –Ω–∞—à–µ–π —Ü–µ–ø–æ—á–∫–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π, –µ—Å–ª–∏ –≤–∞—Å —ç—Ç–æ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç, –º—ã –º–æ–∂–µ–º –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç —ç—Ç–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏. –ï—Å–ª–∏ –≤—ã —É–∂–µ [–≥—Ä–æ–∫–Ω—É–ª–∏ —Ñ—É–Ω–∫—Ç–æ—Ä—ã][2], –≤—ã –∑–Ω–∞–µ—Ç–µ, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è `map` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –¥–ª—è —Ç–∏–ø–∞ `Result` –¥–µ–ª–∞–µ—Ç –µ–≥–æ —Ñ—É–Ω–∫—Ç–æ—Ä–æ–º. –ú—ã –∑–Ω–∞–µ–º, —á—Ç–æ `map` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –∏ –≤—ã–∑—ã–≤–∞–µ—Ç –µ–µ –Ω–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–µ `Result`, –µ—Å–ª–∏ –æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç `Ok`. –ú—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ, —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ü–µ–ø–æ—á–∫—É –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.

```F#
let validateCreditCard card =
    (validateNumber card.Number)
    |> Result.map createCreditCard
    |> apply (validateExpiry card.Expiry)
    |> apply (validateCvv card.Cvv)
```

–≠—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç –≤—ã–≥–ª—è–¥–∏—Ç –Ω–µ—É–∫–ª—é–∂–∏–º, –ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã –Ω–∞—Ä—É—à–∏–ª–∏ –ø–æ—Ç–æ–∫ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è - –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ `createCreditCard` –æ–∫–∞–∑–∞–ª—Å—è –≥–¥–µ-—Ç–æ –º–µ–∂–¥—É –µ–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏. –ß—Ç–æ–±—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å —ç—Ç–æ, –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–ª—è `map` –∏–Ω—Ñ–∏–∫—Å–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä `<!>`, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º
(_–≤ F# –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Å–≤–æ–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –ø—Ä–æ—Å—Ç–æ –∫–∞–∫ - `let (<!>) f x = Result.map f x`. –ì–ª–∞–≤–Ω–æ–µ —Å–∏–ª—å–Ω–æ –Ω–µ —É–≤–ª–µ—á—å—Å—è —ç—Ç–∏–º) –ø—Ä–∏–º. –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–∞_)

```F#
let validateCreditCard card =
    createCreditCard
    <!> validateNumber card.Number
    |> apply (validateExpiry card.Expiry)
    |> apply (validateCvv card.Cvv)
```

–ò –≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ, —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä `<*>` –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ `apply` (_—Ç–∞–∫–∏–º –∂–µ –æ–±—Ä–∞–∑–æ–º: `let (<*>) f a = apply a f` –ø—Ä–∏–º. –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–∞_)

```F#
let validateCreditCard card =
    createCreditCard
    <!> validateNumber card.Number
    <*> validateExpiry card.Expiry
    <*> validateCvv card.Cvv
```

–ù–µ –ø—É–≥–∞–π—Ç–µ—Å—å, –µ—Å–ª–∏ –≤–∞–º –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ —Å—Ç–∞–ª–æ —Ç–æ–ª—å–∫–æ —Ö—É–∂–µ, —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å–∏–º–≤–æ–ª—ã. –ì—Ä–æ–∫–Ω—É—Ç—å –∞–ø–ø–ª–∏–∫–∞—Ç–∏–≤–Ω—ã–π —Ñ—É–Ω–∫—Ç–æ—Ä - –æ–∑–Ω–∞—á–∞–µ—Ç –ø–æ–Ω—è—Ç—å, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ—Ç–æ–¥ `apply` –∏ –∫–∞–∫–∏–µ —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –æ–Ω —Ä–µ—à–∞–µ—Ç, –∞ –Ω–µ –ø—Ä–µ–∏—Å–ø–æ–ª–Ω–∏—Ç—Å—è —ç–∑–æ—Ç–µ—Ä–∏—á–µ—Å–∫–æ–≥–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞. –Ø –ø—Ä–∏–≤–µ–ª –∑–¥–µ—Å—å —ç—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ –¥–æ–≤–æ–ª—å–Ω–æ —á–∞—Å—Ç–æ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –∫–∞–∫ –∞–ø–ø–ª–∏–∫–∞—Ç–∏–≤–Ω—ã–π —Ñ—É–Ω–∫—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–¥–æ–±–Ω—ã–º –æ–±—Ä–∞–∑–æ–º.

## –ê–ø–ø–ª–∏–∫–∞—Ç–∏–≤–Ω—ã–π —Ñ—É–Ω–∫—Ç–æ—Ä –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ

–í—Å—è–∫–∏–π —Ä–∞–∑ –∫–æ–≥–¥–∞ —É –≤–∞—Å –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏, –ø—Ä–∏ —ç—Ç–æ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã –æ–±–µ—Ä–Ω—É—Ç—ã –≤ –Ω–µ—á—Ç–æ –≤—Ä–æ–¥–µ —Ç–∏–ø–∞ `Result` - –∞–ø–ø–ª–∏–∫–∞—Ç–∏–≤–Ω—ã–π —Ñ—É–Ω–∫—Ç–æ—Ä —ç—Ç–æ –∫–∞–∫ —Ä–∞–∑ —Ç–æ, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ.

–ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–∏–ø–æ–≤ –ø–æ–º–∏–º–æ `Result` –º–æ–≥—É—Ç –±—ã—Ç—å –∞–ø–ø–ª–∏–∫–∞—Ç–∏–≤–Ω—ã–º —Ñ—É–Ω–∫—Ç–æ—Ä–æ–º, –≤—Å–µ, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —ç—Ç–æ–≥–æ —Å–¥–µ–ª–∞—Ç—å - —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–¥—Ö–æ–¥—è—â—É—é —Ñ—É–Ω–∫—Ü–∏—é `apply`. –ù–∞–ø—Ä–∏–º–µ—Ä, –º—ã –º–æ–∂–µ–º –Ω–∞–ø–∏—Å–∞—Ç—å —Ç–∞–∫—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è `Option`. –ö–∞–∫ —É–∂–µ –±—ã–ª–æ —Å–∫–∞–∑–∞–Ω–æ —Ä–∞–Ω–µ–µ, –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–∞–∫—É—é —Ñ—É–Ω–∫—Ü–∏—é, –ø–æ—ç—Ç–æ–º—É —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –≤—ã–±—Ä–∞–ª–∏ —Ç–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–∞—à–∏–º –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—è–º.

## –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–µ–±—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —Å–º–æ–∂–µ—Ç–µ –ª–∏ –≤—ã –Ω–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `apply` –¥–ª—è —Ç–∏–ø–∞ `Option`. –û—Ç–≤–µ—Ç —Å–ø—Ä—è—Ç–∞–Ω –ø–æ–¥ –∫–∞—Ç–æ–º, –ø–æ—Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å –Ω–µ –ø–æ–¥–≥–ª—è–¥—ã–≤–∞—Ç—å, —Å–ø–µ—Ä–≤–∞ –Ω–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ.

<details>
  <summary>—Ä–µ—à–µ–Ω–∏–µ –¥–ª—è Option</summary>

```F#
let applyOpt a f =
  match f, a with
  | Some g, Some x -> g x |> Some
  | _ -> None
```

–†–µ—à–µ–Ω–∏–µ –ø–æ—Ö–æ–∂–µ –Ω–∞ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è `Result`, –Ω–æ `None` –Ω–µ –Ω–µ—Å–µ—Ç –Ω–∏–∫–∞–∫–æ–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –ø–æ—ç—Ç–æ–º—É –≤–æ –≤—Å–µ—Ö —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞–≤–Ω–æ `None`, –Ω–∞–º –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–µ—Ä–Ω—É—Ç—å None.

</details>

## –ß–µ–º—É –º—ã –Ω–∞—É—á–∏–ª–∏—Å—å?

–†–µ–∞–ª–∏–∑–æ–≤–∞–≤ —Ñ—É–Ω–∫—Ü–∏—é `apply` –º—ã –ø–æ–ª—É—á–∏–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–º–µ–Ω—è—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã –æ–±–µ—Ä–Ω—É—Ç—ã–µ –≤ `Result` –∫ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—ã—á–Ω—ã–µ —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏–ª–æ –Ω–∞–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–∞—Å—Ç–∏—á–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏, –≤ –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ, –ø–∏—Å–∞—Ç—å –∫–æ–¥ —Ç–∞–∫, –∫–∞–∫ –±—É–¥—Ç–æ –º—ã –∏–º–µ–µ–º –¥–µ–ª–æ —Å –æ–±—ã—á–Ω—ã–º–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏, –∞ –Ω–µ —Å —Ç–∏–ø–æ–º `Result`, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∏ –æ—à–∏–±–∫—É.

[1]:
[2]:
